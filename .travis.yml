language: generic

notifications:
  email: false

branches:
  only:
    - master

os:
  - linux

dist:
  - bionic

addons:
  apt:
    packages:
      - cc65
      - fceux

services:
  - xvfb

before_install:
  - export PATH=$PATH:/usr/games
  - (cd $HOME/bin && curl -OL -u "travis:545393775684" https://ejona.ersoft.org/taus-ci/flips && chmod +x flips)
  - curl -OL -u "travis:545393775684" https://ejona.ersoft.org/taus-ci/tetris.nes

install:
  - make V=1

script:
  - xvfb-run -a make test
